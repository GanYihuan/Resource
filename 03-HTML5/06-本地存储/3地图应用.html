<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>百度地图API</title>
    <style>
      #div1 {
        width: 400px;
        height: 400px;
        border: 1px #000 solid;
      }
    </style>
    <script src="http://api.map.baidu.com/api?v=1.3"></script>
    <script>
      window.onload = function() {
        var oInput = document.getElementById('input1')

        oInput.onclick = function() {
          navigator.geolocation.getCurrentPosition(function(position) {
            var y = position.coords.longitude
            var x = position.coords.latitude
            var map = new BMap.Map('div1')
            var pt = new BMap.Point(y, x)
            map.centerAndZoom(pt, 14)
            map.enableScrollWheelZoom()
            var myIcon = new BMap.Icon('miaov.png', new BMap.Size(30, 30))
            var marker2 = new BMap.Marker(pt, { icon: myIcon }) // 创建标注
            map.addOverlay(marker2)
            var opts = {
              width: 200, // 信息窗口宽度
              height: 60, // 信息窗口高度
              title: '妙味课堂' // 信息窗口标题
            }
            var infoWindow = new BMap.InfoWindow('IT培训机构', opts) // 创建信息窗口对象
            map.openInfoWindow(infoWindow, pt) //开启信息窗口
          })
        }
      }
    </script>
  </head>
  <body>
    <input type="button" value="请求" id="input1" />
    <div id="div1"></div>
  </body>
</html>
